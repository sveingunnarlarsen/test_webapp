(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{84435:(e,r,t)=>{Promise.resolve().then(t.bind(t,19557))},19557:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>B});var s=t(95155),a=t(29602);let n=e=>{let{score:r,children:t,className:n}=e;return(0,s.jsxs)("div",{className:(0,a.cn)("relative",n),children:[(0,s.jsxs)("svg",{className:"size-full -rotate-90",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("circle",{cx:"18",cy:"18",r:"16",fill:"none",className:"stroke-current text-gray-300",strokeWidth:"0.25"}),(0,s.jsx)("circle",{cx:"18",cy:"18",r:"16",fill:"none",className:"stroke-current text-tangerine",strokeWidth:"0.25",strokeDasharray:"100",strokeDashoffset:100-r})]}),(0,s.jsx)("div",{className:"absolute top-1/2 start-1/2 transform -translate-y-1/2 -translate-x-1/2 flex flex-col justify-center items-center",children:t})]})};var l=t(11864),i=t(66261),c=t(12115);let o=(0,t(31027).F)("inline-flex items-center rounded-md border px-1 py-0.25 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:r,variant:t,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(o({variant:t}),r),...n})}let h=e=>{let{trend:r}=e;return(0,s.jsxs)(d,{className:"rounded-full bg-gray-300",variant:"secondary",children:[r>=0?(0,s.jsx)(l.A,{size:12}):(0,s.jsx)(i.A,{size:12}),r]})};function u(e){return e.length<2?0:e[e.length-1].value-e[e.length-2].value}function x(e){return e.length<1?0:e[e.length-1].value}function m(e){return e>75?"Good":e>50?"Mediate":"Needs attention"}let f=e=>{let{data:r}=e;return(0,s.jsxs)("div",{className:"bg-chalk rounded-2xl flex gap-8 flex-wrap px-20 py-12 justify-between",children:[(0,s.jsxs)("div",{className:"flex grow flex-col items-center",children:[(0,s.jsxs)(n,{className:"size-80",score:x(r.phenoScores),children:[(0,s.jsx)("div",{children:"Your Pheno Score"}),(0,s.jsxs)("div",{className:"flex grow items-center gap-2 ml-7",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"text-tangerine text-4xl place-self-center",children:x(r.phenoScores)}),(0,s.jsx)(h,{trend:u(r.phenoScores)})]}),(0,s.jsx)("div",{children:"of 100"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d,{className:"bg-tangerine rounded-full",children:"+4%"}),"Progress from Q1 to Q2"]})]}),(0,s.jsx)("div",{className:"grow flex justify-center",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 grid-rows-2 place-items-center gap-8",children:[(0,s.jsxs)(n,{className:"size-40",score:x(r.healthScores),children:[(0,s.jsx)("div",{className:"text-sm",children:"Health"}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 ml-8",children:[(0,s.jsx)("div",{className:"text-2xl place-self-center",children:x(r.healthScores)}),(0,s.jsx)(h,{trend:u(r.healthScores)})]}),(0,s.jsx)("div",{className:"text-sm",children:m(x(r.healthScores))})]}),(0,s.jsxs)(n,{className:"size-40",score:x(r.mentalScores),children:[(0,s.jsx)("div",{className:"text-sm",children:"Mental"}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 ml-8",children:[(0,s.jsx)("div",{className:"text-2xl place-self-center",children:x(r.mentalScores)}),(0,s.jsx)(h,{trend:u(r.mentalScores)})]}),(0,s.jsx)("div",{className:"text-sm",children:m(x(r.mentalScores))})]}),(0,s.jsxs)(n,{className:"size-40",score:x(r.activityScores),children:[(0,s.jsx)("div",{className:"text-sm",children:"Activity"}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 ml-8",children:[(0,s.jsx)("div",{className:"text-2xl place-self-center",children:x(r.activityScores)}),(0,s.jsx)(h,{trend:u(r.activityScores)})]}),(0,s.jsx)("div",{className:"text-sm",children:m(x(r.activityScores))})]}),(0,s.jsxs)(n,{className:"size-40",score:x(r.sleepScores),children:[(0,s.jsx)("div",{className:"text-sm",children:"Sleep"}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 ml-8",children:[(0,s.jsx)("div",{className:"text-2xl place-self-center",children:x(r.sleepScores)}),(0,s.jsx)(h,{trend:u(r.sleepScores)})]}),(0,s.jsx)("div",{className:"text-sm",children:m(x(r.sleepScores))})]})]})})]})};var g=t(25739),v=t(10058),p=t(24817),j=t(15255),b=t(12800),y=t(66963),N=t(16161),S=t(58581),w=t(27112),k=t(86354);let z={light:"",dark:".dark"},_=c.createContext(null);function C(){let e=c.useContext(_);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let A=c.forwardRef((e,r)=>{let{id:t,className:n,children:l,config:i,...o}=e,d=c.useId(),h="chart-".concat(t||d.replace(/:/g,""));return(0,s.jsx)(_.Provider,{value:{config:i},children:(0,s.jsxs)("div",{"data-chart":h,ref:r,className:(0,a.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...o,children:[(0,s.jsx)(P,{id:h,config:i}),(0,s.jsx)(S.u,{maxHeight:400,children:l})]})})});A.displayName="Chart";let P=e=>{let{id:r,config:t}=e,a=Object.entries(t).filter(e=>{let[,r]=e;return r.theme||r.color});return a.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(z).map(e=>{let[t,s]=e;return"\n".concat(s," [data-chart=").concat(r,"] {\n").concat(a.map(e=>{var r;let[s,a]=e,n=(null===(r=a.theme)||void 0===r?void 0:r[t])||a.color;return n?"  --color-".concat(s,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},G=w.m,L=c.forwardRef((e,r)=>{let{active:t,payload:n,className:l,indicator:i="dot",hideLabel:o=!1,hideIndicator:d=!1,label:h,labelFormatter:u,labelClassName:x,formatter:m,color:f,nameKey:g,labelKey:v}=e,{config:p}=C(),j=c.useMemo(()=>{var e;if(o||!(null==n?void 0:n.length))return null;let[r]=n,t="".concat(v||r.dataKey||r.name||"value"),l=H(p,r,t),i=v||"string"!=typeof h?null==l?void 0:l.label:(null===(e=p[h])||void 0===e?void 0:e.label)||h;return u?(0,s.jsx)("div",{className:(0,a.cn)("font-medium",x),children:u(i,n)}):i?(0,s.jsx)("div",{className:(0,a.cn)("font-medium",x),children:i}):null},[h,u,n,o,x,p,v]);if(!t||!(null==n?void 0:n.length))return null;let b=1===n.length&&"dot"!==i;return(0,s.jsxs)("div",{ref:r,className:(0,a.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),children:[b?null:j,(0,s.jsx)("div",{className:"grid gap-1.5",children:n.map((e,r)=>{let t="".concat(g||e.name||e.dataKey||"value"),n=H(p,e,t),l=f||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,a.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,r,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==n?void 0:n.icon)?(0,s.jsx)(n.icon,{}):!d&&(0,s.jsx)("div",{className:(0,a.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":b&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,s.jsxs)("div",{className:(0,a.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[b?j:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});L.displayName="ChartTooltip";let E=k.s,M=c.forwardRef((e,r)=>{let{className:t,hideIcon:n=!1,payload:l,verticalAlign:i="bottom",nameKey:c}=e,{config:o}=C();return(null==l?void 0:l.length)?(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center justify-end gap-4","top"===i?"pb-3":"pt-3",t),children:l.map(e=>{let r="".concat(c||e.dataKey||"value"),t=H(o,e,r);return(0,s.jsxs)("div",{className:(0,a.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==t?void 0:t.icon)&&!n?(0,s.jsx)(t.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded",style:{backgroundColor:e.color}}),null==t?void 0:t.label]},e.value)})}):null});function H(e,r,t){if("object"!=typeof r||null===r)return;let s="payload"in r&&"object"==typeof r.payload&&null!==r.payload?r.payload:void 0,a=t;return t in r&&"string"==typeof r[t]?a=r[t]:s&&t in s&&"string"==typeof s[t]&&(a=s[t]),a in e?e[a]:e[t]}M.displayName="ChartLegend";let K={phenoScore:{label:"Pheno Score"},healthScore:{label:"Health"},mentalScore:{label:"Mental"},activityScore:{label:"Activity"},sleepScore:{label:"Sleep"}};function O(e){let{data:{phenoScores:r,healthScores:t,mentalScores:a,activityScores:n,sleepScores:l}}=e,i=["phenoScore","healthScore","mentalScore","activityScore","sleepScore"],c=function(e,r){let t=new Map;return e.forEach((e,s)=>{let a=r[s];e.forEach(e=>{let{date:r,value:s}=e;t.has(r)||t.set(r,{date:r}),t.get(r)[a]=s})}),Array.from(t.values())}([r,t,a,n,l],i);console.log(c);let o=["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"];return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl",children:"Pheno Score"}),(0,s.jsx)(A,{config:K,className:"-ml-9",children:(0,s.jsxs)(p.b,{accessibilityLayer:!0,data:c,children:[(0,s.jsx)(j.d,{}),(0,s.jsx)(b.W,{dataKey:"date",tickLine:!1,axisLine:!1,padding:{left:50,right:50}}),(0,s.jsx)(y.h,{type:"number",ticks:[0,20,40,60,80,100],tickLine:!1,axisLine:!1}),(0,s.jsx)(E,{formatter:e=>e in K?K[e].label:e,verticalAlign:"top",content:(0,s.jsx)(M,{})}),(0,s.jsx)(G,{cursor:!1,content:(0,s.jsx)(L,{}),isAnimationActive:!1}),i.map((e,r)=>(0,s.jsx)(N.N,{dataKey:e,type:"monotone",stroke:o[r],strokeWidth:2,dot:!0,isAnimationActive:!1},e))]})})]})}function B(){var e,r;let{data:t,error:a,isLoading:n}=(0,g.o)();if(n)return(0,s.jsx)("div",{children:"Loading..."});if(a)return(0,s.jsxs)("div",{children:["Error: ",a.message]});if(!t)return(0,s.jsx)("div",{children:"No data"});let{data:l,success:i,error:c}=v.y.safeParse(t);return i?(0,s.jsxs)("div",{className:"size-full flex flex-col gap-20",children:[(0,s.jsxs)("p",{className:"text-xl",children:[(0,s.jsxs)("span",{className:"text-foreground-light",children:[(e=l.translation.dashboardGreeting1,r={firstName:l.profile.firstName},e.replace(/\{(\w+)\}/g,(e,t)=>r[t]||e)),(0,s.jsx)("br",{}),l.translation.dashboardGreeting2]}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{children:l.translation.dashboardGreeting3})]}),(0,s.jsx)(f,{data:l}),(0,s.jsx)(O,{data:l})]}):(console.log(c),(0,s.jsx)("div",{children:"Invalid data"}))}},25739:(e,r,t)=>{"use strict";t.d(r,{I:()=>u,o:()=>h});var s=t(4536),a=t(89398),n=t(95714).Buffer;let l="ole-andre.haugen@neptune-software.com",i="Nep2024!",c=new Headers;l&&i&&c.set("Authorization","Basic "+btoa(l+":"+i));let o=new Headers(c);o.set("Content-Type","application/json");let d=async e=>{let r=await fetch(e,{headers:c});return await r.json()};function h(){return(0,s.Ay)("/api/serverscript/phenoClient/masterdata",d)}async function u(e,r){let t=await e.arrayBuffer(),s=n.from(t),l="data:image/".concat(e.type,";base64,").concat(s.toString("base64"));await fetch("/api/serverscript/phenoClient/profile-save?id=".concat(r),{method:"POST",headers:o,body:JSON.stringify({image:l})}),(0,a.k)("/api/serverscript/phenoClient/masterdata")}},10058:(e,r,t)=>{"use strict";t.d(r,{y:()=>n});var s=t(43415);let a=s.z.object({date:s.z.string().date(),value:s.z.number().min(0).max(100)}),n=s.z.object({profile:s.z.object({id:s.z.string(),firstName:s.z.string(),lastName:s.z.string(),image:s.z.string().nullable()}),phenoScores:a.array(),healthScores:a.array(),mentalScores:a.array(),activityScores:a.array(),sleepScores:a.array(),translation:s.z.object({dashboardGreeting1:s.z.string(),dashboardGreeting2:s.z.string(),dashboardGreeting3:s.z.string(),profileGreeting1:s.z.string(),profileGreeting2:s.z.string(),menuDashboard:s.z.string(),menuPhysical:s.z.string(),menuMental:s.z.string(),menuRecommendations:s.z.string()})})},29602:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(43463),a=t(69795);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[361,291,724,441,517,358],()=>r(84435)),_N_E=e.O()}]);